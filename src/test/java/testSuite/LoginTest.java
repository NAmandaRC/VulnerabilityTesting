package testSuite;

import org.junit.jupiter.api.*;
import pages.LoginSection;
import pages.MainPage;
import session.Session;

public class LoginTest {
    @BeforeEach
    public void openBrowser(){
        Session.getSession().getBrowser().get("https://www.demoblaze.com/");
    }
    @AfterEach
    public void closeBrowser(){
        Session.getSession().getBrowser().quit();
    }
    @Test
    @Order(1)
    public void verifyLoginSuccessfully() throws InterruptedException {
        MainPage mainPage = new MainPage();
        LoginSection loginSection = new LoginSection();
        String email = "testing@correo.com";
        String password = "test123";

        mainPage.loginOption.click();
        Thread.sleep(5000);
        loginSection.emailTxtBox.sendKeys(email);
        loginSection.pwdTxtBox.sendKeys(password);
        loginSection.loginButton.click();
        Thread.sleep(10000);
        // Volver a localizar el elemento después del inicio de sesión
        String NameUser = mainPage.nameUser.getText();
        System.out.println("Valor de NameUser: " + NameUser);
        String NameUserValue = NameUser.trim();

        String WelcomeMessage = "Welcome " + email;
        Thread.sleep(5000);
        // Verificar si el mensaje de bienvenida es correcto
        Assertions.assertTrue(NameUserValue.contains(WelcomeMessage),
                "ERROR> no se pudo iniciar sesion");
    }
}


