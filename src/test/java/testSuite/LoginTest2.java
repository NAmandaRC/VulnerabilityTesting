package testSuite;

import org.junit.jupiter.api.*;
import pages.LoginSection;
import pages.MainPage;
import pages.MenuSection;
import session.Session;

import java.awt.*;

public class LoginTest2 {
    @BeforeEach
    public void openBrowser(){
        Session.getSession().getBrowser().get("https://juice-shop.herokuapp.com/#/");
    }
    @AfterEach
    public void closeBrowser(){
        Session.getSession().getBrowser().quit();
    }

    @Test
    @Order(1)
    public void verifyLoginSuccessfully()throws InterruptedException {
        MainPage mainPage = new MainPage();
        MenuSection menuSection = new MenuSection();
        LoginSection loginSection = new LoginSection();


        mainPage.dismissButton.click();
        menuSection.accountButton.click();
        menuSection.loginOption.click();
        loginSection.emailTxtBox.sendKeys("testing@correo.com");
        loginSection.pwdTxtBox.sendKeys("test123");
        loginSection.loginButton.click();

        menuSection.accountButton.click();
        Assertions.assertTrue(menuSection.logoutOption.isDisplayed(),
                "¡ERROR! No se pudo iniciar sesión");
    }

}
